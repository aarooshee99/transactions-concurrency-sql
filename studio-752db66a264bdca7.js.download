(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4450],{54874:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/studio",function(){return s(76986)}])},89806:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var l=s(57657),a=s(74848);let o=(0,l.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},62654:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var l=s(57657),a=s(74848);let o=(0,l.A)((0,a.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"GetApp")},74622:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var l=s(57657),a=s(74848);let o=(0,l.A)((0,a.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch")},72626:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var l=s(57657),a=s(74848);let o=(0,l.A)((0,a.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")},92692:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var l=s(57657),a=s(74848);let o=(0,l.A)((0,a.jsx)("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"}),"TrendingDown")},37915:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var l=s(96540),a=s(7299),o=s(75659),r=s(11794),i=s(3552),n=s(98301),c=s(66247),d=s(38413),p=s(31609);function u(e){return(0,p.Ay)("MuiDialogContentText",e)}(0,d.A)("MuiDialogContentText",["root"]);var h=s(74848);let x=e=>{let{classes:t}=e,s=(0,o.A)({root:["root"]},u,t);return{...t,...s}},j=(0,i.Ay)(c.A,{shouldForwardProp:e=>(0,r.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),m=l.forwardRef(function(e,t){let s=(0,n.b)({props:e,name:"MuiDialogContentText"}),{children:l,className:o,...r}=s,i=x(r);return(0,h.jsx)(j,{component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:r,className:(0,a.A)(i.root,o),...s,classes:i})})},76986:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>er});var l=s(74848),a=s(89806),o=s(62654);let r=(0,s(57657).A)((0,l.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRight");var i=s(92692),n=s(24545),c=s(88788),d=s(74622),p=s(72626),u=s(66247),h=s(28556),x=s(19427),j=s(60373),m=s(2424),A=s(91703),y=s(1771),g=s(77568),v=s(78036),k=s(70258),f=s(39990),b=s(15246),w=s(55935),C=s(94191),S=s(3508),_=s(17319),D=s(66903),T=s(37915),M=s(64543),W=s(55451),I=s(55759),P=s(82058),R=s(47432),z=s(13368),L=s.n(z),B=s(86715),N=s(96540),q=s(37318),E=s(77515),F=s(80923),O=s(85617),V=s(58782),H=s(47863),Y=s(94598),K=s(55103),U=s(71501),Z=s(22689);let X={"/images/logos/html5.svg":5,"/images/logos/c2.svg":5},G=e=>{let{jobTitle:t,jobLocation:s,companyLogo:a,companyName:o,jobsCount:r,companyInfo:i,className:n,...c}=e;return(0,l.jsx)(U.A,{className:n,align:"left",...c,sx:e=>({height:"100%",width:"100%",cursor:"pointer",borderRadius:e.spacing(1)}),children:(0,l.jsx)(Z.A,{children:(0,l.jsx)(P.Ay,{container:!0,spacing:1,children:(0,l.jsx)(P.Ay,{item:!0,xs:12,children:(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(u.A,{variant:"h6",style:{fontWeight:500},children:o}),(0,l.jsx)(u.A,{component:"span",variant:"body2",color:"textSecondary",children:s})]}),(0,l.jsx)("div",{children:(0,l.jsx)(b.A,{style:{padding:X[a]||0,width:60,height:60},src:a,alt:o})})]})})})})})};var J=s(87976),Q=s(49518),$=s(63279),ee=s(2317);let et=[],es=["theme","apiKey","userApiToken"],el=["labels.studio","labels.logo"],ea=e=>{let{title:t,value:s,previousValue:a}=e,o=null;a&&(o=Math.round(100*(o=Math.round((o=s-a)/a*100)))/100);let r=o>=0?"up":"down";return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.A,{variant:"body2",color:"textSecondary",children:t}),(0,l.jsxs)(P.Ay,{container:!0,alignItems:"center",children:[(0,l.jsx)(u.A,{variant:"h6",gutterBottom:!0,style:{marginRight:12,marginTop:4},children:s}),o&&(0,l.jsx)(P.Ay,{item:!0,children:(0,l.jsx)(h.A,{style:{borderRadius:4,backgroundColor:"up"===r?"rgb(24, 144, 255)":"rgb(250, 173, 20)",color:"white"},icon:"up"===r?(0,l.jsx)(n.A,{style:{color:"white"}}):(0,l.jsx)(i.A,{style:{color:"white"}}),label:"".concat(Math.abs(o),"%"),size:"small"})})]})]})},eo=e=>{var t;let s=(0,B.useRouter)(),i=(0,q.wA)(),n=(0,Y.M)();s.query;let{userLoggedIn:h,token:z,_id:U,name:Z,theme:X,plan:eo,countryCode:er}=(0,q.d4)(e=>e.user),ei=(0,q.d4)(e=>e.user.token),[en,ec]=(0,N.useState)({}),[ed,ep]=(0,N.useState)(!1),[eu,eh]=(0,N.useState)(!1),[ex,ej]=(0,N.useState)(null),[em,eA]=(0,N.useState)(null),[ey,eg]=(0,N.useState)(!0),[ev,ek]=N.useState(!1),[ef,eb]=N.useState(!1),[ew,eC]=N.useState(""),[eS,e_]=(0,N.useState)(!!s.asPath.startsWith("/embed")),[eD,eT]=(0,N.useState)(null),[eM,eW]=(0,N.useState)(null),[eI,eP]=(0,N.useState)(!1),eR=()=>{eP(!1)},ez=async()=>{eb(!0),eP(!1);try{let{statusCode:e,error:t,json:s}=await (0,H.RA)("/api/studio/deploy",ei,{...eM});200===e?(null==s?void 0:s.status)==="success"?(ej(ex.map(e=>e._id===eM._id?{...e,deployment:{appId:eM.deployment.appId,url:s.url}}:e)),alert("Workspace deployed successfully!")):alert("Failed to deploy workspace. "+s.error):alert(t)}finally{eb(!1)}};async function eL(e,t){let{statusCode:s,json:l}=await (0,H.RA)("/api/v1/loginUser",null,{apiKey:e,userApiToken:t});200===s&&(null==l?void 0:l.status)==="success"?i((0,Q.pH)(l,!0)):alert("API login failed. "+JSON.stringify(l||{}))}(0,N.useEffect)(()=>{if(s.asPath.startsWith("/embed")){let e={};for(let t of et)s.query[t]&&"true"===s.query[t]&&(e[t]=!0);for(let t of es)s.query[t]&&(e[t]=s.query[t]);let t={};for(let e of el)s.query[e]&&(t[e]=s.query[e]);ec(t),e.apiKey&&e.userApiToken&&eL(e.apiKey,e.userApiToken),e.theme&&e.theme!==n.theme&&n.onUpdate("theme",e.theme,!0)}},[]),(0,N.useEffect)(()=>{var e;let t=J[s.query.template];(null==t?void 0:null===(e=t.datasets)||void 0===e?void 0:e.length)>0&&eC(t.datasets[0].id)},[s.query.template]),(0,N.useEffect)(()=>{eS&&s.query.userApiToken&&!z||eB()},[z]);let eB=async()=>{eg(!0);let{statusCode:e,error:t,json:s}=await (0,H.ZM)("/api/studio/workspaces",ei);200===e?ej(s=s.filter(e=>"deleted"!==e.status&&"delete_failed"!==e.status)):alert(t),eg(!1),ep(!0);let{json:l}=await (0,H.ZM)("/api/studio/workspace/stats",ei);eA(l)},eN=async e=>{if(ek(!0),"running"===e.status||"stopped"===e.status){if(eS){let{json:e}=await (0,H.ZM)("/api/studio/verifyApiAccess",ei);if((null==e?void 0:e.access)!==!0){alert("Studio access has not been enabled for your API"),ek(!1);return}}$.Router.pushRoute("".concat(eS?"/embed":"","/studio/").concat(e.template._id,"/").concat(e._id))}else"stopping"===e.status?alert("Workspace is stopping. Please try again in a minute."):alert("Workspace cannot be opened. Please contact support");ek(!1)},eq=async()=>{if(null===eD)return;console.log("Deleting workspace: ",eD);let e=await (0,H.yH)("/api/studio/workspace/".concat(eD),ei,{});eT(null),e&&"success"===e.status?eB():alert("Failed to delete workspace")};return eS&&!ed?(0,l.jsx)(V.A,{}):!eS&&er&&ee.DISABLED_COUNTRY_CODES.includes(er)?(0,l.jsx)(K.A,{}):(0,l.jsxs)(l.Fragment,{children:[!1===eS&&(0,l.jsx)(L(),{children:(0,l.jsx)("title",{children:"Studio - OneCompiler"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(x.A,{children:!1===eS&&(0,l.jsx)(F.A,{})}),eS&&(0,l.jsx)("div",{style:{marginTop:30}}),(0,l.jsxs)(I.A,{fixed:!0,component:"main",children:[(0,l.jsxs)(x.A,{children:[en["labels.logo"]?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("img",{style:{maxWidth:200,paddingBottom:20},src:en["labels.logo"]})}):(0,l.jsx)(u.A,{variant:"h3",component:"h1",color:"primary",gutterBottom:!0,children:en["labels.studio"]||"Studio"}),(0,l.jsx)(u.A,{variant:"body1",color:"textSecondary",children:"".concat(en["labels.studio"]||"Studio"," gives online Visual Studio Code environment to build projects. You can choose from the below readily available templates to start building your project. If the template you are looking for is not available, you can always create a new workspace from scratch using the Alpine template.\n                      ")}),(0,l.jsx)("br",{})," ",(0,l.jsx)("br",{})]}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[(0,l.jsx)(u.A,{variant:"h5",component:"h1",color:"primary",style:{marginBottom:0},children:"Your Workspaces"}),(0,l.jsx)(j.A,{title:"Refresh",children:(0,l.jsx)(m.A,{onClick:()=>eB(),disabled:ey,size:"small",style:{marginLeft:8,opacity:.7,marginTop:6},children:(0,l.jsx)(p.A,{fontSize:"small"})})})]}),ey&&(0,l.jsx)(V.A,{}),!ey&&null!==ex&&(0,l.jsxs)(l.Fragment,{children:[(null==ex?void 0:ex.length)>0?(0,l.jsx)(u.A,{variant:"body1",color:"textSecondary",children:"Below, you'll find a list of your workspaces. Simply click on the workspace to resume your work"}):(0,l.jsx)(u.A,{variant:"body1",color:"textSecondary",children:"No workspaces found. You can always launch a new workspace from the above-listed templates"}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(null==ex?void 0:ex.length)>0&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(A.A,{variant:"outlined",style:{borderBottom:"none"},children:(0,l.jsxs)(y.A,{"aria-label":"workspaces",children:[(0,l.jsx)(g.A,{sx:e=>({borderBottom:"2px solid ".concat("dark"===e.palette.mode?e.palette.grey[700]:e.palette.grey[200])}),children:(0,l.jsxs)(v.A,{children:[(0,l.jsx)(k.A,{children:"Template"}),(0,l.jsx)(k.A,{children:"Name"}),(0,l.jsx)(k.A,{children:"Status"}),(0,l.jsx)(k.A,{children:"Created"}),(0,l.jsx)(k.A,{align:"left",children:"Actions"})]})}),(0,l.jsx)(f.A,{children:ex.sort((e,t)=>new Date(t.created)-new Date(e.created)).map(e=>{var t,s;return(0,l.jsxs)(v.A,{sx:e=>({cursor:"pointer",borderBottom:"2px solid ".concat("dark"===e.palette.mode?e.palette.grey[800]:e.palette.grey[200]),"&:hover":{backgroundColor:"dark"===e.palette.mode?e.palette.grey[900]:e.palette.grey[100]}}),onClick:()=>eN(e),children:[(0,l.jsx)(k.A,{children:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(b.A,{src:J[e.template._id].logo,sx:{width:"30px",height:"30px"}}),(0,l.jsx)(u.A,{style:{paddingLeft:14},variant:"subtitle1",children:J[e.template._id].title})]})}),(0,l.jsxs)(k.A,{children:[" ",e.name||e._id," "]}),(0,l.jsxs)(k.A,{children:[" ",e.status," "]}),(0,l.jsxs)(k.A,{children:[" ",(0,R.A)(new Date(e.created),{max:1,suffix:!0})," "]}),(0,l.jsxs)(k.A,{align:"left",children:["stopped"===e.status&&e.backup&&(0,l.jsx)(j.A,{title:"Download Backup",children:(0,l.jsx)(m.A,{onClick:t=>{t.stopPropagation(),window.open(e.backup,"_blank")},size:"large",children:(0,l.jsx)(o.A,{})})}),(0,l.jsx)(j.A,{title:"Delete Workspace",children:(0,l.jsx)(m.A,{onClick:t=>{t.stopPropagation(),eT(e._id)},size:"large",children:(0,l.jsx)(a.A,{})})}),(0,l.jsx)(j.A,{title:"Open Workspace",children:(0,l.jsx)(w.A,{color:"primary",onClick:t=>{t.stopPropagation(),eN(e)},endIcon:(0,l.jsx)(r,{}),children:"Open"})}),["angular","html","html-simple","react","vue"].includes(null==e?void 0:null===(t=e.template)||void 0===t?void 0:t._id)&&(0,l.jsx)(j.A,{title:"Deploy Workspace",children:(0,l.jsx)(m.A,{onClick:t=>{t.stopPropagation(),eP(!0),eW(e)},size:"large",children:(0,l.jsx)(c.A,{})})}),(null==e?void 0:null===(s=e.deployment)||void 0===s?void 0:s.url)&&(0,l.jsx)(j.A,{title:"Open live workspace",children:(0,l.jsx)(m.A,{onClick:t=>{t.stopPropagation(),window.open(e.deployment.url,"_blank")},size:"large",children:(0,l.jsx)(d.A,{})})})]})]},e._id)})})]})})})]}),(0,l.jsx)("br",{})," ",(0,l.jsx)("br",{}),(0,l.jsx)(u.A,{variant:"h5",component:"h1",color:"primary",children:"Templates"}),(0,l.jsx)("br",{}),(0,l.jsx)(P.Ay,{container:!0,spacing:6,children:Object.values(J).filter(e=>!e.deprecated&&!e.beta).map(e=>(0,l.jsx)(P.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,l.jsx)("div",{onClick:()=>{$.Router.pushRoute("".concat(eS?"/embed":"","/studio/").concat(e._id))},children:(0,l.jsx)(G,{variant:"outlined",companyName:e.title,jobTitle:e.status,jobLocation:e.vm,companyLogo:e.logo,jobsCount:"< 1 Minute",companyInfo:e.description,link:e.link,tags:e.tags})})},e._id))}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),em&&(0,l.jsxs)(P.Ay,{container:!0,children:[(0,l.jsx)(P.Ay,{item:!0,xs:6,md:2,children:(0,l.jsx)(ea,{title:"Total Workspaces",value:em.totalWorkspaces})}),(0,l.jsx)(P.Ay,{item:!0,xs:6,md:2,children:(0,l.jsx)(ea,{title:"Last 7 Days",value:em.totalWorkspacesLast7Days,previousValue:em.totalWorkspacesLast7DaysPrevious})}),(0,l.jsx)(P.Ay,{item:!0,xs:6,md:2,children:(0,l.jsx)(ea,{title:"Today",value:em.totalWorkspacesToday,previousValue:em.totalWorkspacesYesterday})}),(0,l.jsx)(P.Ay,{item:!0,xs:6,md:2,children:(0,l.jsx)(ea,{title:"Live",value:em.totalRunningWorkspaces})})]}),(0,l.jsx)(C.A,{style:{marginTop:2,marginBottom:10}}),(0,l.jsx)("br",{})]}),!1===eS&&(0,l.jsx)(E.A,{})]}),(0,l.jsx)(O.A,{open:ev,message:"Starting the workspace"}),(0,l.jsx)(O.A,{open:ef,message:"Deploying the workspace"}),(0,l.jsxs)(S.A,{open:null!=eD,onClose:()=>eT(null),children:[(0,l.jsx)(_.A,{children:"Do you want to delete the workspace?"}),(0,l.jsx)(D.A,{children:(0,l.jsx)(T.A,{children:"This action cannot be undone. Deleting the workspace will permanently remove all associated data, including projects, files and settings. Please confirm that you want to proceed with this irreversible action."})}),(0,l.jsxs)(M.A,{children:[(0,l.jsx)(w.A,{onClick:()=>eT(null),color:"primary",children:"Cancel"}),(0,l.jsx)(w.A,{onClick:()=>eq(),color:"primary",autoFocus:!0,children:"Delete"})]})]}),(0,l.jsxs)(S.A,{open:eI,onClose:eR,children:[(0,l.jsx)(_.A,{children:"Enter AppId"}),(0,l.jsxs)(D.A,{children:[(0,l.jsx)(T.A,{children:"Please enter the AppId to proceed with deployment."}),(0,l.jsx)(W.A,{autoFocus:!0,margin:"dense",label:"AppId",type:"text",fullWidth:!0,value:null==eM?void 0:null===(t=eM.deployment)||void 0===t?void 0:t.appId,onChange:e=>eW({...eM,deployment:{...eM.deployment,appId:e.target.value}})})]}),(0,l.jsxs)(M.A,{children:[(0,l.jsx)(w.A,{onClick:eR,color:"primary",children:"Cancel"}),(0,l.jsx)(w.A,{onClick:()=>{ez()},color:"primary",children:"Deploy"})]})]})]})};eo.getInitialProps=async e=>({foo:"temp fix for missing query"});let er=eo}},e=>{var t=t=>e(e.s=t);e.O(0,[1243,863,7730,1589,5935,5984,2815,7982,7681,4583,1811,8556,6799,4102,923,5103,636,6593,8792],()=>t(54874)),_N_E=e.O()}]);